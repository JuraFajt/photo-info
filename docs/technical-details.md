[Back](../README.md)

# Technical Details


## Testing

The plugin was so far tested on Windows 10 + Lightroom Classic 6.14 (last "permanent" version). Looking for confirmation of working state on other system + LR version combinations.


## Image Metadata

Exiftool is used for extracting previews and metadata information from particular image files. The metadata have to be present in the image file, i.e. not striped out by some image editing tools.

Ideal workflow in case of Lightroom is to keep the original images intact and save the modifications into XMP files or LR database.

### Metadata in Image File vs. LR Database

Some metadata is generated by the camera & already written into the original image. Some additional data can be added later by LR automatically or by the user and stored in LR database.

The correct approach should then be to prefer overriden data from database when different from data inthe image. Examples of such data: geographical coordinates added by the user in lightroom for camera which doesn't have GPS module built-in, orientation angle modified in LR manually for camera which doesn't have orientation sensor built-in (Pentax *ist-DS for example).

Only some data is being used correctly according to the above approach. This will be fine-tuned in later versions.


## Displaying Metadata in Lightroom vs. Exporting to External HTML

Lightroom dialogs have problems on Windows with
- rendering transparent graphics layers
- size of the dialogs on screen
- complicated graphics creation & need to use external tools like ImageMagick or similar

Advantages of exporting to HTML include:
- The graphical overlays can be ecreated directly as DOM elements, easily styled & become interactive.
- Exported data is permanent & can be viewed without LR currently running.
- HTML format should be viewable practically on any system.
- The browser's localStorage should work for storing the last settings.
- The exports are portable - just copy the whole exported folder anywhere you like & open the index.html form there. Should still work, though the optional stored settings in localStorage will not be ported.

### File Protocol vs. Local Webserver

The plugin currently exports the local HTML page to be used via the `file://` protocol. This brings simplicity for viewing, but also drawbacks, which include:
- The javascript files can't be `EcmaScript modules` and have to be loaded / evaluated in a specific (not extra nice) way.
- Generation of dynamic image data via `canvas` is basically impossible due to security reasons.

The other possibility is to start a local secure webserver after the first export & display the exported data as a standard webpage on some localhost URL. This possibility wasn't investigated in deeper detail so far.

### Successful Exports Open Multiple Browser Tabs

There is probably no way to display the exported page in the same browser tab after each export. See related [issue](https://github.com/JuraFajt/photo-info/issues/17) in GitHub.
